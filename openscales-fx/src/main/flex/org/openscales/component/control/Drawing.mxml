<?xml version="1.0" encoding="utf-8"?>
<control:Control xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:control="org.openscales.component.control.*" implements="org.openscales.core.control.IControl" width="244" height="158">
	
	<mx:Script>
		<![CDATA[
			import mx.controls.Alert;
			import org.openscales.core.layer.Vector;
			import org.openscales.core.handler.Handler;
			import org.openscales.core.handler.sketch.DrawPointHandler;
			import org.openscales.core.geometry.Geometry;
			
			import org.openscales.core.Map;
			
			
			public var drawLayer:Vector = new Vector("Sketch");			
			public var pointHandler:DrawPointHandler = new DrawPointHandler(null, false, drawLayer);
			
			
			private var drawType:String = "";
			

			public function onDeleteAllClick(event:Event):void {
				drawLayer.destroyFeatures();
				drawLayer.renderer.clear();
			}
			
			public function onDeleteLastClick(event:Event):void {
				var last:Number = drawLayer.features.length - 1;
				
				if (last >= 0) {
					drawLayer.removeFeatures(drawLayer.features[last]);
				}
				else {
					Alert.show("There are not features to delete !", "Message");
				}
			}
			
			public function onPathClick(event:Event):void {
				 Alert.show("Not implemented yet...", "Message"); 
			}
			
			public function onPolygonClick(event:Event):void {
				Alert.show("Not implemented yet...", "Message");
			}
			
			public function onPointClick(event:Event):void {
				if(drawType != "point") {
					drawType = "point";
					pointHandler.active = true;
				}
				else {
					drawType = "";
					pointHandler.active = false;
				}
			}
			
			override public function set map(value:Map):void
			{
				super.map = value;
				pointHandler.map = value;
				this.map.addLayer(drawLayer);
			}
		]]>
	</mx:Script>
	<mx:Button x="10" y="10" label="Point" id="btnPoint" click="this.onPointClick(event)" toggle="true" width="72"/>
	<mx:Button x="146" y="69" label="DeleteAll" id="btnDeleteAll" click="this.onDeleteAllClick(event)" width="88"/>
	<mx:Button x="10" y="69" label="Path" id="btnPath" width="72" click="this.onPathClick(event)"/>
	<mx:Button x="10" y="124" label="Polygon" id="btnPolygon" click="this.onPolygonClick(event)"/>
	<mx:Button x="146" y="10" label="DeleteLast" width="88" id="btnDeleteLast" click="this.onDeleteLastClick(event)"/>
	

</control:Control>